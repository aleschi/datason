<header role="banner" class="fr-header">
    <div class="fr-header__body">
        <div class="fr-container">
            <div class="fr-header__body-row">
                <div class="fr-header__brand fr-enlarge-link">
                    <div class="fr-header__brand-top">
                        <div class="fr-header__logo">
                            <p class="fr-logo">
                                Ministère
                                <br>de l'économie<br>des finances<br>et de la souveraineté<br> industrielle et numérique
                            </p>
                        </div>
                    </div>
                    <div class="fr-header__service">
                        <a href="/" title="Accueil - SIMULAE">
                          <p class="fr-header__service-title">SIMP3</p>
                        </a>
                        <p class="fr-header__service-tagline">Suivi des indicateurs MP3</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<div class="fr-container">    
  <div class="fr-grid-row fr-grid-row--gutters">
    <div class="fr-col-lg-6 fr-col-offset-lg-3">
       
      <h1 class="fr-my-5w tc">Connexion</h1>
    
      <%= form_for(resource, as: resource_name, url: session_path(resource_name),:html => {:id => "login"}, remote: true) do |f| %>

        <div class="fr-input-group ">
          <label class="fr-label" for="form-field1">Adresse mail*</label>
          <%= f.email_field :email,required: true, autofocus: true, autocomplete: "email",class:"fr-input", id: "form-field1" %>
        </div>

        <div class="fr-input-group ">
          <label class="fr-label" for="form-field2">Mot de passe*</label>
          <%= f.password_field :password,required: true, autocomplete: "current-password",class:"fr-input", id: "form-field2" %>
        </div>

        <div id='error-message'></div>
        <div class="d24"></div>
     
        <div class="tc">
          <%= f.submit "Connexion", class:"fr-btn" %>
        </div>

      <% end %>
    </div>
  </div>
</div>

<script>
   $(document).ready(function() {
    //form id
    $('#login')
    .bind('ajax:success', function(evt, data, status, xhr) {
      //function called on status: 200 (for ex.)
      //console.log('success');
      window.location.href = "/"
    })
    .bind("ajax:error", function(evt, xhr, status, error) {
      //function called on status: 401 or 500 (for ex.)
      //console.log(xhr.responseText);
      $('#error-message').html("identifiant ou mot de passe non reconnu");
      $('#error-message').addClass('fr-error-text');
      $('#password').addClass('fr-input--error');
      $('#motdepasse').addClass('fr-input-group--error');
    });
  });

</script>
